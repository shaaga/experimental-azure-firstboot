# This playbook is used to create new environment variables on the host system
- name: 70-add-env-variables
  hosts: localhost
  vars:
          config_variables: azconfig.yml
          config_mount_point: /mnt

  vars_files:
          - "{{ config_mount_point + '/' + config_variables }}"

  tasks:
    # Add the new env variables' entries in the shell's bashrc script
    - name: Add env variables in the bashrc file
      lineinfile:
        path: /root/.bashrc
        line: export {{item.name}}={{sap_hostname}}
      when: item.name == 'HOST'
      with_items:
        - {name: 'HOST'}
    # Execute the bashrc script to create the env variables
    - name: Execute the bashrc script
      shell: source /root/.bashrc